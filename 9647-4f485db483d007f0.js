"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9647],{58551:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(31567),o=n(77920),a=n(87379),i=a.ZP.div.withConfig({displayName:"styled__Container",componentId:"sc-dh7jqa-0"})(["display:flex;flex:1;justify-content:center;align-items:center;flex-direction:column;text-align:center;max-width:100%;svg{color:",";margin-bottom:",";}"],(function(e){return e.theme.color.textGrayscale4}),(function(e){return e.theme.spacing.lg})),s=a.ZP.div.withConfig({displayName:"styled__Title",componentId:"sc-dh7jqa-1"})(["font-weight:bold;margin-bottom:",";"],(function(e){return e.theme.spacing.sm})),c=a.ZP.div.withConfig({displayName:"styled__Description",componentId:"sc-dh7jqa-2"})(["max-width:600px;font-size:14px;line-height:1.5;",""],(function(e){var t=e.theme;return e.hasButton&&"\n    margin-bottom: ".concat(t.spacing.lg,";\n  ")})),u=n(85893),l=function(e){var t=e.title,n=e.description,a=e.icon,l=void 0===a?"frown":a,d=e.button,p=(0,r.$)().t,f=(0,o.l7)(l);return(0,u.jsxs)(i,{children:[(0,u.jsx)(f,{size:56}),(0,u.jsx)(s,{children:null!==t&&void 0!==t?t:p("error.title")}),(0,u.jsx)(c,{hasButton:!!d,children:null!==n&&void 0!==n?n:p("error.description")}),d]})}},46655:function(e,t,n){n.d(t,{Z:function(){return ie}});var r=n(27812),o=n(50029),a=n(59499),i=n(87794),s=n.n(i),c=n(67294),u=n(31567),l=n(5152),d=n.n(l),p=n(96486),f=n(93213),m=n(65477),g=n(21777),h=n(40665),v=n(77770),b=n(16186),y=n(60661),w=n(10711),x=n(19994);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=0,P=!1,Z=function(){return!(!window||!window.gtag)},S=function e(t){Z()?t():++O<5?setTimeout((function(){e(t)}),1e3*O+100):P=!0},C=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Z()?gtag("event",t,k(k({},n),{},{non_interaction:!0})):P||S((function(){e(t,n)}))},D=0,T=!1,_=function(){return!(!window||!window.fbq)},I=function e(t){_()?t():++D<5?setTimeout((function(){e(t)}),1e3*D+100):T=!0},N=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_()?fbq("trackCustom",t,n):T||I((function(){e(t,n)}))},E=n(11308),F=n(65279),M=n(81726);var L=function(e,t){(0,c.useEffect)((function(){if(t.isCustomDomain&&document&&document.querySelectorAll){var e=document.querySelectorAll("form a");e&&0!==e.length&&e.forEach&&e.forEach((function(e){var t;e&&e.getAttribute&&0===(null!==(t=e.getAttribute("href"))&&void 0!==t?t:"").indexOf(window.location.origin)&&"_blank"===e.getAttribute("target")&&e.removeAttribute("target")}))}}),[e])},z=n(37058),A=n(87379),B=A.ZP.div.withConfig({displayName:"styled__Container",componentId:"sc-1lbuz9z-0"})(["display:flex;background:",";",""],(function(e){return e.theme.color.background}),(function(e){return e.styles.transparentBackground&&"\n    background: transparent;\n  "})),U=A.ZP.main.withConfig({displayName:"styled__Content",componentId:"sc-1lbuz9z-1"})(["display:flex;flex-direction:column;width:100%;height:auto;min-height:100vh;",""],(function(e){return e.styles.popup&&"\n    height: auto;\n    min-height: auto;\n  "})),q=n(85893),V=function(e){var t=e.metaData,n=e.integrations,r=e.styles,o=e.children;return(0,q.jsx)(c.Fragment,{children:(0,q.jsxs)(B,{className:"tally-app",styles:r,children:[(0,q.jsx)(z.Z,{metaData:t,integrations:n}),(0,q.jsx)(U,{styles:r,children:o})]})})},Y=n(76992),W=n(58551),G=n(54140),J=n(66474),H=n(88041),R=n(88593),$=n(8268),Q=n(9953);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ee=function(e){return e?n:t})(e)}var te=d()((function(){return Promise.resolve().then((function(){return function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=ee(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(99604))}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[99604]}}}),ne=!1,re=!0,oe=!1,ae={},ie=function(e){var t,n,i=e.formId,l=e.workspaceId,d=e.name,j=e.blocks,k=e.pages,O=e.isClosed,P=e.isPreview,S=e.settings,D=e.metaData,T=e.integrations,I=e.styles,z=e.hasActiveSubscription,A=e.hasError,B=e.isNotFoundError,U=(0,u.$)().t,X=(0,c.useState)(!1),ee=X[0],ie=X[1],se=(0,c.useState)({}),ce=se[0],ue=se[1],le=(0,c.useState)(),de=le[0],pe=le[1],fe=(0,c.useState)(1),me=fe[0],ge=fe[1],he=(0,c.useState)([1]),ve=he[0],be=he[1],ye=(0,c.useState)(!1),we=ye[0],xe=ye[1],je=(0,c.useState)(!1),ke=je[0],Oe=je[1],Pe=(0,c.useState)({}),Ze=Pe[0],Se=Pe[1],Ce=(0,c.useMemo)((function(){return(0,g.O6)(i)}),[]),De=(0,c.useMemo)((function(){return(0,g.bZ)(l)}),[]),Te=(0,E.Z)({mode:"respond",formId:i,blocks:j,page:me,pages:k,pageHistory:ve}),_e=Te.formData,Ie=Te.onChangeFormData,Ne=(0,g.Tp)(me,k,j,_e,Ie),Ee=Ne.logo,Fe=Ne.cover,Me=Ne.coverSettings,Le=Ne.pageBlocks,ze=Ne.nextPage,Ae=Ne.isCustomThankYouPage,Be=Ne.isLastInputPage,Ue=Ne.canAutoJumpToNextPage,qe=Ne.pageFilledIn,Ve=Ne.showButton,Ye=Ne.buttonLabel,We=Ne.showMaliciousFormWarning;D=K(K({},D),{},{title:D.title||d||U("title.form"),description:D.description||U("description.respond"),imageUrl:D.imageUrl||Fe||"",doNotTrack:P,doNotSearchIndex:!D.isCustomDomain}),I.withMedia=!!Ee||!!Fe;var Ge=!ee&&!I.removeBranding,Je=function(e,t){var n=(0,g.X1)(e,t,i,d,j,_e);(0,b.h)(b.j.TallyFormSubmitted,n),(0,w.yL)()&&window.parent.postMessage(JSON.stringify({event:b.j.TallyFormSubmitted,payload:n}),"*"),Z()&&C(b.j.TallyFormSubmitted,{event_category:window.location.pathname,event_label:d}),_()&&N(b.j.TallyFormSubmitted,{content_category:window.location.pathname,content_name:d})},He=function(e){var t;ge(e),null===(t=window)||void 0===t||t.scrollTo(0,0)},Re=function(){if(ke&&Oe(!1),ee)ie(!1);else{var e=ve[ve.length-2];e&&(He(e),be(ve.slice(0,-1)))}},$e=function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=2;break}return e.abrupt("return");case 2:if(!oe){e.next=4;break}return e.abrupt("return");case 4:return oe=!0,e.prev=5,e.next=8,x.ZP.post("/forms/".concat(i,"/respond"),{sessionUuid:Ce,respondentUuid:De,responses:ae,isCompleted:!1});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:re=!1,oe=!1,ae={};case 15:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(){return e.apply(this,arguments)}}(),Qe=(0,c.useRef)((0,p.debounce)($e,1e3)).current,Xe=function(){var e=(0,o.Z)(s().mark((function e(){var t,n,o,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=2;break}return e.abrupt("return");case 2:if(!we){e.next=4;break}return e.abrupt("return");case 4:if(xe(!0),pe(void 0),!Qe){e.next=9;break}return e.next=9,Qe.flush();case 9:return e.prev=9,e.next=12,x.ZP.post("/forms/".concat(i,"/respond"),{sessionUuid:Ce,respondentUuid:De,responses:_e,isCompleted:!0});case 12:if(t=e.sent,n=t.data,o=n.submissionId,a=n.respondentId,ne=!0,Je(o,a),(0,g.Md)(i),(0,g.lL)(i),null===S||void 0===S||!S.redirectOnCompletion){e.next=32;break}return c=(0,y.F2)(S.redirectOnCompletion,j,_e,{id:o,respondentId:a,formName:d}),e.prev=20,(0,w.yL)()?window.top.location.href=c:window.location.href=c,e.abrupt("return");case 25:if(e.prev=25,e.t0=e.catch(20),null!==ze){e.next=30;break}return ie(!0),e.abrupt("return");case 30:He(ze),be([].concat((0,r.Z)(ve),[ze]));case 32:e.next=38;break;case 34:e.prev=34,e.t1=e.catch(9),pe(e.t1),Re();case 38:xe(!1);case 39:case"end":return e.stop()}}),e,null,[[9,34],[20,25]])})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne||we||!Be){e.next=7;break}return e.next=3,Xe();case 3:if(null===S||void 0===S||!S.redirectOnCompletion){e.next=5;break}return e.abrupt("return");case 5:if(ne){e.next=7;break}return e.abrupt("return");case 7:if(null!==ze){e.next=10;break}return ie(!0),e.abrupt("return");case 10:He(ze),be([].concat((0,r.Z)(ve),[ze]));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=(0,v.PV)(Le),r=(0,h.G)(K(K({},_e),Ze),n),ue(r),!(Object.keys(r).length>0)){e.next=7;break}return setTimeout((function(){var e;return null===(e=document.querySelector('[aria-invalid="true"]'))||void 0===e?void 0:e.focus()}),100),e.abrupt("return");case 7:return e.next=9,Ke();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){Se({}),(0,b.h)(b.j.TallyFormPageView,{page:me}),(0,w.yL)()&&window.parent.postMessage(JSON.stringify({event:b.j.TallyFormPageView,payload:{formId:i,page:me}}),"*"),Z()&&C(b.j.TallyFormPageView,{event_category:window.location.pathname,event_label:"Page ".concat(me)}),_()&&N(b.j.TallyFormPageView,{content_category:window.location.pathname,value:me}),(0,w.yL)()&&1===me||(0,g.Sz)()}),[me]),(0,c.useEffect)((function(){Ue&&qe&&ke&&setTimeout((function(){Ke(),Oe(!1)}),400),!Ue&&qe&&ke&&Oe(!1)}),[Ue,qe,ke]),(0,M.Z)(j,_e),L(me,D),(0,F.Z)((function(e){!(0,w.yL)()&&!ne&&Object.keys(_e).length>0&&(e.preventDefault(),e.returnValue="")}),[_e]),A?(0,q.jsxs)(V,{metaData:D,integrations:T,styles:I,children:[B?(0,q.jsx)(W.Z,{title:U("form-page.404.title"),description:U("form-page.404.description")}):(0,q.jsx)(W.Z,{}),!I.removeBranding&&(0,q.jsx)(Q.Oi,{children:(0,q.jsx)(te,{mode:"respond",styles:I})})]}):O?(0,q.jsxs)(V,{metaData:D,integrations:T,styles:I,children:[(0,q.jsx)(W.Z,{icon:"eye-off",title:(null===S||void 0===S?void 0:S.closeMessageTitle)||U("form-respond.closed.title"),description:(null===S||void 0===S?void 0:S.closeMessageDescription)||U("form-respond.closed.description")}),!I.removeBranding&&(0,q.jsx)(Q.Oi,{children:(0,q.jsx)(te,{mode:"respond",styles:I})})]}):(0,q.jsxs)(V,{metaData:D,integrations:T,styles:I,children:[Fe&&(0,q.jsx)(H.default,{cover:Fe,settings:Me,styles:I}),Ee&&(0,q.jsx)(R.default,{logo:Ee,withCover:!!Fe,styles:I}),(0,q.jsxs)(Q.VY,{className:"tally-page".concat(ee?"":" tally-page-".concat(me)).concat(ee||Ae?" tally-page-thank-you":""),styles:I,page:me,isDefaultThankYouPage:ee,children:[!ee&&Ve&&1!==me&&(0,q.jsx)(Q.OQ,{className:"tally-back-button",children:(0,q.jsx)(Y.Z,{icon:"arrow-left",value:U("label.back"),variant:"form-secondary",onClick:Re})}),ee?(0,q.jsx)($.Z,{mode:"respond",styles:I}):(0,q.jsxs)("form",{children:[(0,q.jsx)("progress",{max:k.length,value:me,children:U("form-respond.progress",{page:me,pages:k.length})}),de&&(0,q.jsx)(G.Z,{exception:de}),(0,q.jsx)(J.Z,{blocks:j,pageBlocks:Le,formData:_e,errors:ce,mode:"respond",formId:i,workspaceId:l,hasActiveSubscription:z,hasPartialSubmissions:null!==(t=null===S||void 0===S?void 0:S.hasPartialSubmissions)&&void 0!==t&&t,language:null!==(n=null===S||void 0===S?void 0:S.language)&&void 0!==n?n:m.S.English,styles:I,onChange:function(e,t){ke||(Ie(e,t),Ue&&"undefined"!==typeof t&&Oe(!0))},onSaveResponse:function(){var e=(0,o.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke){e.next=2;break}return e.abrupt("return");case 2:ae=z&&null!==S&&void 0!==S&&S.hasPartialSubmissions&&re?K(K(K({},ae),_e),t):K(K({},ae),t),Qe();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSolveCaptcha:function(e){Se(K(K({},Ze),{},(0,a.Z)({},e,!0)))}}),Ve&&(0,q.jsxs)(c.Fragment,{children:[(0,q.jsxs)(Q.YD,{className:"tally-submit-button",children:[(0,q.jsx)("div",{children:(0,q.jsx)(Y.Z,{type:"submit",value:null!==Ye&&void 0!==Ye?Ye:U(Be?"label.submit":"label.next"),icon:"arrow-right",iconPosition:"right",variant:"form",isLoading:we||ke,onClick:et})}),Ge&&(0,q.jsx)("div",{children:(0,q.jsx)(te,{mode:"respond",styles:I})})]}),We&&(0,q.jsx)(Q.V8,{dangerouslySetInnerHTML:{__html:U("form-respond.password-warning",{reportUrl:f.Z.get("help-links.report-abuse")})}})]})]}),Ge&&Ae&&(0,q.jsx)(Q.Oi,{children:(0,q.jsx)(te,{mode:"respond",styles:I,isOnThankYouPage:!0,isOnCustomThankYouPage:!0})})]})]})}},65279:function(e,t,n){var r=n(67294);t.Z=function(e,t){var n=(0,r.useCallback)((function(t){e&&e(t)}),t);(0,r.useEffect)((function(){var e;return null===(e=window)||void 0===e||e.addEventListener("beforeunload",n),function(){var e;null===(e=window)||void 0===e||e.removeEventListener("beforeunload",n)}}),[n])}},59340:function(e,t,n){n.d(t,{T:function(){return u},c:function(){return l}});var r=n(50029),o=n(87794),a=n.n(o),i=n(9669),s=n.n(i),c=n(19994),u=10485760,l=function(){var e=(0,r.Z)(a().mark((function e(t,n){var r,o,i,u,l,d,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.size<33554432)){e.next=7;break}return(r=new FormData).append("asset",n),e.next=5,c.ZP.post(t,r,{headers:{"Content-Type":"multipart/form-data"}});case 5:return o=e.sent,e.abrupt("return",o.data);case 7:return e.next=9,c.ZP.get("".concat(t,"/signed-url"),{params:{fileType:n.type,fileName:n.name}});case 9:return i=e.sent,u=i.data,l=u.signedUploadUrl,d=u.fileId,e.next=13,s().put(l,n,{headers:{"Content-Type":n.type}});case 13:return e.next=15,c.ZP.post("".concat(t,"/signed-url"),{fileId:d,fileType:n.type,fileName:n.name,fileSize:n.size});case 15:return p=e.sent,e.abrupt("return",p.data);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}]);